# Dashboard UI

Single Page Application с дашбордами для мониторинга.

### Development

Для локальной разработки в системе должны быть установлены:
* [Node.js](https://nodejs.org)
* [Yarn](https://yarnpkg.com)

В приложении используется стек: [TypeScript](http://www.typescriptlang.org/), [Angular](https://angular.io/), [Angular CLI](https://github.com/angular/angular-cli) и [D3.js](https://d3js.org/).

**Установка зависимостей**
```
yarn
```

**Запуск dev-сервера в watch-режиме**
```
npm start
```
приложение запустится по адресу [localhost:4200](http://localhost:4200/) с автоматическим отслеживанием изменений файлов исходного кода, компиляцией и live-reloading.

**Сборка для production**

```
npm run build
```

**Запуск production-сборки локально**
```
npm run build:serve
```
приложение запустится по адресу [localhost:4200](http://localhost:4200/)

### Deployment

Результатом сборки будет набор JS, CSS и HTML файлов в папке `dist/` которые нужно будет просто скопировать на сервер как есть в какую-нибудь папку из которой nginx будет раздавать их как статику. 
По умолчанию предполгается что SPA будет лежать в корне домена или поддомена, например по адресу `dashboard.monitoring.binomo.io/` будет отдаваться `index.html`
Если же нужно чтобы адрес приложения содержал base path, например `monitoring.binomo.io/dashboard/` то в команду сборки нужно передать соответствующую опцию, для корректной работы внутреннего роутинга SPA:
```
npm run build -- --base-href '/dashboard/'
```

### Импорт данных для графиков

Данные для графиков лежат в json-файлах в папке `assets/data`.
`routes.json` - главный файл в котором перечислены разделы и табы, это что-то вроде карты для дальнейшей навигации по приложению. На стартовой странице приложения отображается меню со ссылками на все разделы из `routes.json`.
В дальнейшем при переходе по ссылке будет построен путь за файлом по паттерну `/assets/data/{section}/{tab}.json`, соответсвенно имена папок и файлов должны совпадать с тем что находятся в `routes.json`.
Всего 2 типа графиков - line и bar при отрисовке тип графика определяется автоматически в зависимости от того что лежит в json.
